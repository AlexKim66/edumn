let routes = [
    {
        path: '/p/:menu_id',
        component: require('./views/index').default,
        children: [{
            path: ':sub_menu_id',
            component: require('./views/sub').default,
        }]
    },
    {
        path: '/module/:module',
        component: require('./views/module').default,
    },
    {
        name: 'Error',
        path: '/*',
        component: require('./views/404.vue').default
    }
];

const install = (Vue, options) => {
    Vue.mixin({
        mounted() {
            this.$nextTick(() => {
                if (!this.$parent) {
                    this.$router.app.$router.addRoutes(routes);
                }
            });
        }
    });
};

if (typeof window !== 'undefined' && window.Vue) {
    install(window.Vue);
}
