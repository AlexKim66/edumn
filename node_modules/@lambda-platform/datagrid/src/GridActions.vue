<template>
    <span class="grid-actions">
        <span v-for="item in params.actions" :key="item.index">
            <Tooltip v-if="item == 'qe'" content="Хялбар засвар">
                <Button shape="circle" icon="ios-bolt" size="small"
                        @click="params.methods.quickEdit(params.value)"></Button>
            </Tooltip>

            <Tooltip v-if="item == 'cl'" content="Хувилах">
                <Button shape="circle" icon="ios-copy" size="small"
                        @click="params.methods.clone(params.value)"></Button>
            </Tooltip>


            <Tooltip v-if="item == 'v'" content="Харах">
                <Button shape="circle" icon="md-eye" size="small" @click="params.methods.view(params.value)"></Button>
            </Tooltip>

            <Tooltip
                v-if="item == 'e'
            && (params.actionsVisibility==null
            || !('e' in params.actionsVisibility)
            || ('e' in params.actionsVisibility
            && params.data[params.actionsVisibility.e.field]!=params.actionsVisibility.e.value))"
                content="Засах">
                <Button shape="circle" icon="md-create" size="small"
                        @click="params.methods.edit(params.value)"></Button>
            </Tooltip>

            <Poptip
                v-if="item == 'd'
            && (params.actionsVisibility==null
            || !('d' in params.actionsVisibility)
            || ('d' in params.actionsVisibility
            && params.data[params.actionsVisibility.d.field]!=params.actionsVisibility.d.value))"
                confirm title="Уг өгөгдлийг устгахдаа итгэлтэй байна уу?" :transfer="true"
                ok-text="Тийм" cancel-text="Үгүй" @on-ok="params.methods.remove(params.value, params.rowIndex)">
                <Button shape="circle" icon="ios-trash" size="small"></Button>
            </Poptip>
        </span>

        <span v-for="item in params.customActions" :key="item.index">
            <Tooltip v-if="item.tooltip
            && (!('condition' in item)
            || params.data[item.condition.field]!=item.condition.value)"
                     :content="item.tooltip" placement="left">
                <Button shape="circle" size="small" class="grid-action-btn"
                        @click="item.method(params.data)"><i :class="item.icon"></i>
                </Button>
            </Tooltip>
            <Button v-else-if="!('condition' in item)
            || params.data[item.condition.field]!=item.condition.value"
                    shape="circle" size="small"
                    class="grid-action-btn"
                    @click="item.method(params.data)">
                <i :class="item.icon"></i>
            </Button>
        </span>
    </span>
</template>

<script>
import Vue from "vue";

export default Vue.extend({
    mounted() //ashiglaj bgaa shu
    {
        // console.log('action button called');
        // console.log(this.params.actionsVisibility);
        // console.log(this.params);
    }
});
</script>

