<template>
    <div class="paper-theme aside-page">
        <sidebar class="wide">
            <div slot="brand" class="logo" v-if="!app_text">

                <img :src="app_logo ? app_logo : '/images/puzzle-logo-white.png'" alt="Puzzle Visual Builder">
                <span>Lambda</span>
            </div>
            <div slot="brand" class="logo" v-else>
                <span class="app-text">{{app_text}}</span>
            </div>

            <ul>
                <li class="sub-title">
                    <span>ӨГӨГДӨЛ БҮРТГЭХ ОРЧИН ҮҮСГЭГЧ</span>
                </li>
                <li>
                    <router-link to="/form">
                        <i class="ti-layout-cta-right"></i>
                        <span>Маягт</span>
                    </router-link>
                </li>
                <li>
                    <router-link to="/grid">
                        <i class="ti-layout-list-thumb"></i>
                        <span>Хүснэгт</span>
                    </router-link>
                </li>
                <li>
                    <router-link to="/crud">
                        <i class="ti-layers"></i>
                        <span>Маягт, хүснэгт нэгтгэл</span>
                    </router-link>
                </li>
                <li class="divider"></li>
                <li class="sub-title">
                    <span>МЭДЭЭЛЭЛ БОЛОВСРУУЛАГЧ</span>
                </li>

                <li>
                    <router-link to="/datasource">
                        <i class="ti-server"></i>
                        <span>Өгөгдлийн тохиргоо</span>
                    </router-link>
                </li>
                <li>
                    <router-link to="/chart">
                        <i class="ti-pie-chart"></i>
                        <span>График</span>
                    </router-link>
                </li>
                <li>
                    <router-link to="/moqup">
                        <i class="ti-layout"></i>
                        <span>Эх бэлтгэл</span>
                    </router-link>
                </li>

                <li>
                    <router-link to="/analytic">
                        <i class="ti-bar-chart"></i>
                        <span>Анализ</span>
                    </router-link>
                </li>

                <li>
                    <router-link to="/notification">
                        <i class="ti-bell"></i>
                        <span>Зорилтод мэдэгдэл</span>
                    </router-link>
                </li>


                <li>
                    <router-link to="/graphql">
                      <img src="/assets/lambda/images/graphql.svg" width="21">&nbsp;
                      <span>Graphql удирдлага</span>
                    </router-link>
                </li>


                <li class="divider"></li>
                <li class="sub-title">
                    <span>ХЭРЭГЛЭГЧ, ХАНДАХ ЭРХ</span>
                </li>
                <li>
                    <router-link to="/module/agent">
                        <i class="ti-user"></i>
                        <span>Хэрэглэгчид</span>
                    </router-link>
                </li>
                <li>
                    <router-link to="/role">
                        <i class="ti-unlock"></i>
                        <span>Хандах эрх, Зөвшөөрөл</span>
                    </router-link>
                </li>

                <li>
                    <router-link to="/menu">
                        <i class="ti-align-justify"></i>
                        <span>Цэсний тохиргоо</span>
                    </router-link>
                </li>
                <li class="divider"></li>
            </ul>
            <div slot="aside-bottom">
                <ul>
                    <li>

                        <a @click="logoutModal = true">
                            <Icon type="ios-log-out"></Icon>
                            <span>
                                Гарах
                            </span>
                        </a>
                    </li>
                </ul>
            </div>
        </sidebar>
        <main>
            <router-view></router-view>
        </main>

        <Modal v-model="logoutModal" :closable="false" width="252" class="logout-modal">
            <p slot="header" style="display:none;"></p>
            <div style="text-align:center">
                <a @click="logout()">
                    <Icon type="md-log-out"/>
                    Гарах
                </a>
                <a @click="cancel()">
                    <Icon type="md-refresh"/>
                    Болих
                </a>
            </div>
            <div slot="footer" style="display:none;">
                <form action="/auth/logout"></form>
            </div>
        </Modal>
    </div>
</template>

<script>
    import {mapGetters} from "vuex";

    export default {
        computed: {
            ...mapGetters({
                user: "user"
            })
        },
        data() {
            const app_logo = window.init.app_logo;
            const app_text = window.init.app_text;
            return {
                logoutModal: false,
                app_logo: app_logo,
                app_text: app_text,
            };
        },
        components: {},
        methods: {
            logout() {
                axios.post("/auth/logout", {}).then(o => {
                    window.location = "/auth/login";
                });
            },
            cancel() {
                this.$data.logoutModal = false;
            }
        }
    };
</script>
